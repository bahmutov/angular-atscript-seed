System.register("app.ats", [], function() {
  "use strict";
  var __moduleName = "app.ats";
  var Router = System.get("router.ats").Router;
  var homeModule = System.get("home/home.ats").homeModule;
  var Something = System.get("something.ats").Something;
  var appModule = angular.module("App", ["ui.router", homeModule.name]);
  appModule.config(Router);
  var s = new Something();
  console.log(s.sum(5, 5));
  return {};
});

//# sourceMappingURL=<compileOutput>

System.register("router.ats", [], function() {
  "use strict";
  var __moduleName = "router.ats";
  function Router($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise("/home");
    $stateProvider.state('home', {
      url: "/home",
      controller: "HomeCtrl as homeCtrl",
      templateUrl: "modules/home/home.html"
    }).state('details', {
      url: "/details",
      controller: "DetailsCtrl as detailsCtrl",
      templateUrl: "modules/home/details.html"
    });
  }
  var Router = ['$stateProvider', '$urlRouterProvider', Router];
  return {get Router() {
      return Router;
    }};
});

//# sourceMappingURL=<compileOutput>

System.register("something.ats", [], function() {
  "use strict";
  var __moduleName = "something.ats";
  var assert = System.get("assert").assert;
  var Something = function Something() {};
  ($traceurRuntime.createClass)(Something, {sum: function(a, b) {
      assert.argumentTypes(a, $traceurRuntime.type.number, b, $traceurRuntime.type.number);
      return assert.returnType((a + b), $traceurRuntime.type.number);
    }}, {});
  Object.defineProperty(Something.prototype.sum, "parameters", {get: function() {
      return [[$traceurRuntime.type.number], [$traceurRuntime.type.number]];
    }});
  return {get Something() {
      return Something;
    }};
});

//# sourceMappingURL=<compileOutput>

System.register("home/home-controller.ats", [], function() {
  "use strict";
  var __moduleName = "home/home-controller.ats";
  function HomeController(HomeService) {
    this.HomeService = HomeService;
  }
  HomeController.prototype.sayHello = function() {
    var $__0 = this;
    this.HomeService.getGreeting(this.name).then((function(greeting) {
      return $__0.greeting = greeting;
    }));
  };
  var HomeController = ['HomeService', HomeController];
  return {get HomeController() {
      return HomeController;
    }};
});

//# sourceMappingURL=<compileOutput>

System.register("home/home-service.ats", [], function() {
  "use strict";
  var __moduleName = "home/home-service.ats";
  function HomeService($q) {
    this.getGreeting = function() {
      var name = arguments[0] !== (void 0) ? arguments[0] : "Noname McDefault";
      return $q((function(resolve) {
        return resolve("Hello, " + name + ".  Welcome to Angular in AtScript!!");
      }));
    };
  }
  var HomeService = ['$q', HomeService];
  return {get HomeService() {
      return HomeService;
    }};
});

//# sourceMappingURL=<compileOutput>

System.register("home/home.ats", [], function() {
  "use strict";
  var __moduleName = "home/home.ats";
  var homeModule = angular.module("Home", []);
  var HomeController = System.get("home/home-controller.ats").HomeController;
  var HomeService = System.get("home/home-service.ats").HomeService;
  homeModule.controller("HomeCtrl", HomeController);
  homeModule.service("HomeService", HomeService);
  return {get homeModule() {
      return homeModule;
    }};
});

//# sourceMappingURL=<compileOutput>

System.register("assert", [], function() {
  "use strict";
  var __moduleName = "assert";
  var POSITION_NAME = ['', '1st', '2nd', '3rd'];
  function argPositionName(i) {
    var position = (i / 2) + 1;
    return POSITION_NAME[position] || (position + 'th');
  }
  var primitives = $traceurRuntime.type;
  function assertArgumentTypes() {
    for (var params = [],
        $__2 = 0; $__2 < arguments.length; $__2++)
      params[$__2] = arguments[$__2];
    var actual,
        type;
    var currentArgErrors;
    var errors = [];
    var msg;
    for (var i = 0,
        l = params.length; i < l; i = i + 2) {
      actual = params[i];
      type = params[i + 1];
      currentArgErrors = [];
      if (!isType(actual, type, currentArgErrors)) {
        errors.push(argPositionName(i) + ' argument has to be an instance of ' + prettyPrint(type) + ', got ' + prettyPrint(actual));
        if (currentArgErrors.length) {
          errors.push(currentArgErrors);
        }
      }
    }
    if (errors.length) {
      throw new Error('Invalid arguments given!\n' + formatErrors(errors));
    }
  }
  function prettyPrint(value) {
    if (typeof value === 'undefined') {
      return 'undefined';
    }
    if (typeof value === 'string') {
      return '"' + value + '"';
    }
    if (typeof value === 'boolean') {
      return value.toString();
    }
    if (value === null) {
      return 'null';
    }
    if (typeof value === 'object') {
      if (value.map) {
        return '[' + value.map(prettyPrint).join(', ') + ']';
      }
      var properties = Object.keys(value);
      return '{' + properties.map((function(p) {
        return p + ': ' + prettyPrint(value[p]);
      })).join(', ') + '}';
    }
    return value.__assertName || value.name || value.toString();
  }
  function isType(value, T, errors) {
    if (T === primitives.void) {
      return typeof value === 'undefined';
    }
    if (T === primitives.any || value === null) {
      return true;
    }
    if (T === primitives.string) {
      return typeof value === 'string';
    }
    if (T === primitives.number) {
      return typeof value === 'number';
    }
    if (T === primitives.boolean) {
      return typeof value === 'boolean';
    }
    if (typeof T.assert === 'function') {
      var parentStack = currentStack;
      var isValid;
      currentStack = errors;
      try {
        isValid = T.assert(value);
      } catch (e) {
        fail(e.message);
        isValid = false;
      }
      currentStack = parentStack;
      if (typeof isValid === 'undefined') {
        isValid = errors.length === 0;
      }
      return isValid;
    }
    return value instanceof T;
  }
  function formatErrors(errors) {
    var indent = arguments[1] !== (void 0) ? arguments[1] : '  ';
    return errors.map((function(e) {
      if (typeof e === 'string')
        return indent + '- ' + e;
      return formatErrors(e, indent + '  ');
    })).join('\n');
  }
  function type(actual, T) {
    var errors = [];
    if (!isType(actual, T, errors)) {
      var msg = 'Expected an instance of ' + prettyPrint(T) + ', got ' + prettyPrint(actual) + '!';
      if (errors.length) {
        msg += '\n' + formatErrors(errors);
      }
      throw new Error(msg);
    }
  }
  function returnType(actual, T) {
    var errors = [];
    if (!isType(actual, T, errors)) {
      var msg = 'Expected to return an instance of ' + prettyPrint(T) + ', got ' + prettyPrint(actual) + '!';
      if (errors.length) {
        msg += '\n' + formatErrors(errors);
      }
      throw new Error(msg);
    }
    return actual;
  }
  var string = define('string', function(value) {
    return typeof value === 'string';
  });
  var boolean = define('boolean', function(value) {
    return typeof value === 'boolean';
  });
  var number = define('number', function(value) {
    return typeof value === 'number';
  });
  function arrayOf() {
    for (var types = [],
        $__3 = 0; $__3 < arguments.length; $__3++)
      types[$__3] = arguments[$__3];
    return assert.define('array of ' + types.map(prettyPrint).join('/'), function(value) {
      var $__5;
      if (assert(value).is(Array)) {
        for (var $__0 = value[Symbol.iterator](),
            $__1; !($__1 = $__0.next()).done; ) {
          var item = $__1.value;
          {
            ($__5 = assert(item)).is.apply($__5, $traceurRuntime.spread(types));
          }
        }
      }
    });
  }
  function structure(definition) {
    var properties = Object.keys(definition);
    return assert.define('object with properties ' + properties.join(', '), function(value) {
      if (assert(value).is(Object)) {
        for (var $__0 = properties[Symbol.iterator](),
            $__1; !($__1 = $__0.next()).done; ) {
          var property = $__1.value;
          {
            assert(value[property]).is(definition[property]);
          }
        }
      }
    });
  }
  var currentStack = [];
  function fail(message) {
    currentStack.push(message);
  }
  function define(classOrName, check) {
    var cls = classOrName;
    if (typeof classOrName === 'string') {
      cls = function() {};
      cls.__assertName = classOrName;
    }
    cls.assert = function(value) {
      return check(value);
    };
    return cls;
  }
  function assert(value) {
    return {is: function is() {
        var $__5;
        for (var types = [],
            $__4 = 0; $__4 < arguments.length; $__4++)
          types[$__4] = arguments[$__4];
        var allErrors = [];
        var errors;
        for (var $__0 = types[Symbol.iterator](),
            $__1; !($__1 = $__0.next()).done; ) {
          var type = $__1.value;
          {
            errors = [];
            if (isType(value, type, errors)) {
              return true;
            }
            allErrors.push(prettyPrint(value) + ' is not instance of ' + prettyPrint(type));
            if (errors.length) {
              allErrors.push(errors);
            }
          }
        }
        ($__5 = currentStack).push.apply($__5, $traceurRuntime.spread(allErrors));
        return false;
      }};
  }
  assert.type = type;
  assert.argumentTypes = assertArgumentTypes;
  assert.returnType = returnType;
  assert.define = define;
  assert.fail = fail;
  assert.string = string;
  assert.number = number;
  assert.boolean = boolean;
  assert.arrayOf = arrayOf;
  assert.structure = structure;
  ;
  return {get assert() {
      return assert;
    }};
});

//# sourceMappingURL=<compileOutput>

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5hdHMiLCJyb3V0ZXIuYXRzIiwic29tZXRoaW5nLmF0cyIsImhvbWUvaG9tZS1jb250cm9sbGVyLmF0cyIsImhvbWUvaG9tZS1zZXJ2aWNlLmF0cyIsImhvbWUvaG9tZS5hdHMiLCJhc3NlcnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsS0FBTyxFQUFDLE1BQUssQ0FBQyxLQUFPLGFBQVcsQ0FBQztBQUNqQyxLQUFPLEVBQUMsVUFBUyxDQUFDLEtBQU8sZ0JBQWMsQ0FBQztBQUN4QyxLQUFPLEVBQUMsU0FBUSxDQUFDLEtBQU8sZ0JBQWMsQ0FBQztBQUV2QyxBQUFJLEVBQUEsQ0FBQSxTQUFRLEVBQUksQ0FBQSxPQUFNLE9BQU8sQUFBQyxDQUFDLEtBQUksQ0FBRyxFQUFDLFdBQVUsQ0FBRyxDQUFBLFVBQVMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUVyRSxRQUFRLE9BQU8sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBRXhCLEFBQUksRUFBQSxDQUFBLENBQUEsRUFBSSxJQUFJLFVBQVEsQUFBQyxFQUFDLENBQUM7QUFDdkIsTUFBTSxJQUFJLEFBQUMsQ0FBQyxDQUFBLElBQUksQUFBQyxDQUFDLENBQUEsQ0FBRyxFQUFBLENBQUMsQ0FBQyxDQUFDO0FBQ3hCOzs7Ozs7OztBQ1ZBLE9BQVMsT0FBSyxDQUFFLGNBQWEsQ0FBRyxDQUFBLGtCQUFpQixDQUFHO0FBR2hELG1CQUFpQixVQUFVLEFBQUMsQ0FBQyxPQUFNLENBQUMsQ0FBQztBQUVyQyxlQUFhLE1BQ0osQUFBQyxDQUFDLE1BQUssQ0FBRztBQUNYLE1BQUUsQ0FBRyxRQUFNO0FBQ1gsYUFBUyxDQUFJLHVCQUFxQjtBQUNsQyxjQUFVLENBQUcseUJBQXVCO0FBQUEsRUFDeEMsQ0FBQyxNQUNJLEFBQUMsQ0FBQyxTQUFRLENBQUc7QUFDZCxNQUFFLENBQUcsV0FBUztBQUNkLGFBQVMsQ0FBSSw2QkFBMkI7QUFDeEMsY0FBVSxDQUFHLDRCQUEwQjtBQUFBLEVBQzNDLENBQUMs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QztBQUNsQixLQUFLLE9BQU8sRUFBSSxPQUFLLENBQUM7QUFDdEIsS0FBSyxPQUFPLEVBQUksT0FBSyxDQUFDO0FBQ3RCLEtBQUssUUFBUSxFQUFJLFFBQU0sQ0FBQztBQUN4QixLQUFLLFFBQVEsRUFBSSxRQUFNLENBQUM7QUFDeEIsS0FBSyxVQUFVLEVBQUksVUFBUSxDQUFDO0FBQzVCLEtBQU8sQ0FBQSxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBQUEiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSb3V0ZXJ9IGZyb20gJ3JvdXRlci5hdHMnO1xuaW1wb3J0IHtob21lTW9kdWxlfSBmcm9tICdob21lL2hvbWUuYXRzJztcbmltcG9ydCB7U29tZXRoaW5nfSBmcm9tICdzb21ldGhpbmcuYXRzJztcblxudmFyIGFwcE1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKFwiQXBwXCIsIFtcInVpLnJvdXRlclwiLCBob21lTW9kdWxlLm5hbWVdKTtcblxuYXBwTW9kdWxlLmNvbmZpZyhSb3V0ZXIpO1xuXG52YXIgcyA9IG5ldyBTb21ldGhpbmcoKTtcbmNvbnNvbGUubG9nKHMuc3VtKDUsIDUpKTtcbiIsImZ1bmN0aW9uIFJvdXRlcigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cbiAgICAvLyBGb3IgYW55IHVubWF0Y2hlZCB1cmwsIHJlZGlyZWN0IHRvIC9ob21lXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9ob21lXCIpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICAgICAgdXJsOiBcIi9ob21lXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJIb21lQ3RybCBhcyBob21lQ3RybFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwibW9kdWxlcy9ob21lL2hvbWUuaHRtbFwiXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZGV0YWlscycsIHtcbiAgICAgICAgICAgIHVybDogXCIvZGV0YWlsc1wiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiRGV0YWlsc0N0cmwgYXMgZGV0YWlsc0N0cmxcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIm1vZHVsZXMvaG9tZS9kZXRhaWxzLmh0bWxcIlxuICAgICAgICB9KTtcbn1cblxuZXhwb3J0IHZhciBSb3V0ZXIgPSBbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsIFJvdXRlcl07IiwiZXhwb3J0IGNsYXNzIFNvbWV0aGluZyB7XG4gICAgc3VtKGE6IG51bWJlciwgYjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGEgKyBiO1xuICAgIH1cbn1cbiIsImZ1bmN0aW9uIEhvbWVDb250cm9sbGVyKEhvbWVTZXJ2aWNlKSB7XG5cbiAgICB0aGlzLkhvbWVTZXJ2aWNlID0gSG9tZVNlcnZpY2U7XG59XG5cbkhvbWVDb250cm9sbGVyLnByb3RvdHlwZS5zYXlIZWxsbyA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIE5vdGUgJ3RoaXMnIGZvciBncmVldGluZyBpcyBib3VuZCB0byB0aGlzIG9iamVjdCB1c2luZyBsZXhpY2FsIHNjb3BlXG4gICAgdGhpcy5Ib21lU2VydmljZS5nZXRHcmVldGluZyh0aGlzLm5hbWUpLnRoZW4oZ3JlZXRpbmcgPT4gdGhpcy5ncmVldGluZyA9IGdyZWV0aW5nKTtcbn07XG5cbmV4cG9ydCB2YXIgSG9tZUNvbnRyb2xsZXIgPSBbJ0hvbWVTZXJ2aWNlJywgSG9tZUNvbnRyb2xsZXJdOyIsImZ1bmN0aW9uIEhvbWVTZXJ2aWNlICgkcSkge1xuXG4gICAgdGhpcy5nZXRHcmVldGluZyA9IGZ1bmN0aW9uIChuYW1lID0gXCJOb25hbWUgTWNEZWZhdWx0XCIpIHtcblxuICAgICAgICByZXR1cm4gJHEocmVzb2x2ZSA9PiByZXNvbHZlKFwiSGVsbG8sIFwiICsgbmFtZSArIFwiLiAgV2VsY29tZSB0byBBbmd1bGFyIGluIEF0U2NyaXB0ISFcIikpO1xuICAgIH07XG59XG5cbmV4cG9ydCB2YXIgSG9tZVNlcnZpY2UgPSBbJyRxJywgSG9tZVNlcnZpY2VdOyIsImV4cG9ydCB2YXIgaG9tZU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKFwiSG9tZVwiLCBbXSk7XG5cbmltcG9ydCB7SG9tZUNvbnRyb2xsZXJ9IGZyb20gXCJob21lL2hvbWUtY29udHJvbGxlci5hdHNcIjtcbmltcG9ydCB7SG9tZVNlcnZpY2V9IGZyb20gXCJob21lL2hvbWUtc2VydmljZS5hdHNcIjtcblxuaG9tZU1vZHVsZS5jb250cm9sbGVyKFwiSG9tZUN0cmxcIiwgSG9tZUNvbnRyb2xsZXIpO1xuaG9tZU1vZHVsZS5zZXJ2aWNlKFwiSG9tZVNlcnZpY2VcIiwgSG9tZVNlcnZpY2UpO1xuIiwidmFyIFBPU0lUSU9OX05BTUUgPSBbJycsICcxc3QnLCAnMm5kJywgJzNyZCddO1xuZnVuY3Rpb24gYXJnUG9zaXRpb25OYW1lKGkpIHtcbiAgdmFyIHBvc2l0aW9uID0gKGkgLyAyKSArIDE7XG4gIHJldHVybiBQT1NJVElPTl9OQU1FW3Bvc2l0aW9uXSB8fCAocG9zaXRpb24gKyAndGgnKTtcbn1cbnZhciBwcmltaXRpdmVzID0gJHRyYWNldXJSdW50aW1lLnR5cGU7XG5mdW5jdGlvbiBhc3NlcnRBcmd1bWVudFR5cGVzKC4uLnBhcmFtcykge1xuICB2YXIgYWN0dWFsLFxuICAgICAgdHlwZTtcbiAgdmFyIGN1cnJlbnRBcmdFcnJvcnM7XG4gIHZhciBlcnJvcnMgPSBbXTtcbiAgdmFyIG1zZztcbiAgZm9yICh2YXIgaSA9IDAsXG4gICAgICBsID0gcGFyYW1zLmxlbmd0aDsgaSA8IGw7IGkgPSBpICsgMikge1xuICAgIGFjdHVhbCA9IHBhcmFtc1tpXTtcbiAgICB0eXBlID0gcGFyYW1zW2kgKyAxXTtcbiAgICBjdXJyZW50QXJnRXJyb3JzID0gW107XG4gICAgaWYgKCFpc1R5cGUoYWN0dWFsLCB0eXBlLCBjdXJyZW50QXJnRXJyb3JzKSkge1xuICAgICAgZXJyb3JzLnB1c2goYXJnUG9zaXRpb25OYW1lKGkpICsgJyBhcmd1bWVudCBoYXMgdG8gYmUgYW4gaW5zdGFuY2Ugb2YgJyArIHByZXR0eVByaW50KHR5cGUpICsgJywgZ290ICcgKyBwcmV0dHlQcmludChhY3R1YWwpKTtcbiAgICAgIGlmIChjdXJyZW50QXJnRXJyb3JzLmxlbmd0aCkge1xuICAgICAgICBlcnJvcnMucHVzaChjdXJyZW50QXJnRXJyb3JzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzIGdpdmVuIVxcbicgKyBmb3JtYXRFcnJvcnMoZXJyb3JzKSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHByZXR0eVByaW50KHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuICd1bmRlZmluZWQnO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuICdcIicgKyB2YWx1ZSArICdcIic7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gIH1cbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuICdudWxsJztcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgIGlmICh2YWx1ZS5tYXApIHtcbiAgICAgIHJldHVybiAnWycgKyB2YWx1ZS5tYXAocHJldHR5UHJpbnQpLmpvaW4oJywgJykgKyAnXSc7XG4gICAgfVxuICAgIHZhciBwcm9wZXJ0aWVzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgIHJldHVybiAneycgKyBwcm9wZXJ0aWVzLm1hcCgocCkgPT4gcCArICc6ICcgKyBwcmV0dHlQcmludCh2YWx1ZVtwXSkpLmpvaW4oJywgJykgKyAnfSc7XG4gIH1cbiAgcmV0dXJuIHZhbHVlLl9fYXNzZXJ0TmFtZSB8fCB2YWx1ZS5uYW1lIHx8IHZhbHVlLnRvU3RyaW5nKCk7XG59XG5mdW5jdGlvbiBpc1R5cGUodmFsdWUsIFQsIGVycm9ycykge1xuICBpZiAoVCA9PT0gcHJpbWl0aXZlcy52b2lkKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7XG4gIH1cbiAgaWYgKFQgPT09IHByaW1pdGl2ZXMuYW55IHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKFQgPT09IHByaW1pdGl2ZXMuc3RyaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZyc7XG4gIH1cbiAgaWYgKFQgPT09IHByaW1pdGl2ZXMubnVtYmVyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcic7XG4gIH1cbiAgaWYgKFQgPT09IHByaW1pdGl2ZXMuYm9vbGVhbikge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJztcbiAgfVxuICBpZiAodHlwZW9mIFQuYXNzZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHBhcmVudFN0YWNrID0gY3VycmVudFN0YWNrO1xuICAgIHZhciBpc1ZhbGlkO1xuICAgIGN1cnJlbnRTdGFjayA9IGVycm9ycztcbiAgICB0cnkge1xuICAgICAgaXNWYWxpZCA9IFQuYXNzZXJ0KHZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBmYWlsKGUubWVzc2FnZSk7XG4gICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgfVxuICAgIGN1cnJlbnRTdGFjayA9IHBhcmVudFN0YWNrO1xuICAgIGlmICh0eXBlb2YgaXNWYWxpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlzVmFsaWQgPSBlcnJvcnMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICByZXR1cm4gaXNWYWxpZDtcbiAgfVxuICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBUO1xufVxuZnVuY3Rpb24gZm9ybWF0RXJyb3JzKGVycm9ycywgaW5kZW50ID0gJyAgJykge1xuICByZXR1cm4gZXJyb3JzLm1hcCgoZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgZSA9PT0gJ3N0cmluZycpXG4gICAgICByZXR1cm4gaW5kZW50ICsgJy0gJyArIGU7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9ycyhlLCBpbmRlbnQgKyAnICAnKTtcbiAgfSkuam9pbignXFxuJyk7XG59XG5mdW5jdGlvbiB0eXBlKGFjdHVhbCwgVCkge1xuICB2YXIgZXJyb3JzID0gW107XG4gIGlmICghaXNUeXBlKGFjdHVhbCwgVCwgZXJyb3JzKSkge1xuICAgIHZhciBtc2cgPSAnRXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgJyArIHByZXR0eVByaW50KFQpICsgJywgZ290ICcgKyBwcmV0dHlQcmludChhY3R1YWwpICsgJyEnO1xuICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICBtc2cgKz0gJ1xcbicgKyBmb3JtYXRFcnJvcnMoZXJyb3JzKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJldHVyblR5cGUoYWN0dWFsLCBUKSB7XG4gIHZhciBlcnJvcnMgPSBbXTtcbiAgaWYgKCFpc1R5cGUoYWN0dWFsLCBULCBlcnJvcnMpKSB7XG4gICAgdmFyIG1zZyA9ICdFeHBlY3RlZCB0byByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgJyArIHByZXR0eVByaW50KFQpICsgJywgZ290ICcgKyBwcmV0dHlQcmludChhY3R1YWwpICsgJyEnO1xuICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICBtc2cgKz0gJ1xcbicgKyBmb3JtYXRFcnJvcnMoZXJyb3JzKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gIH1cbiAgcmV0dXJuIGFjdHVhbDtcbn1cbnZhciBzdHJpbmcgPSBkZWZpbmUoJ3N0cmluZycsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xufSk7XG52YXIgYm9vbGVhbiA9IGRlZmluZSgnYm9vbGVhbicsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJztcbn0pO1xudmFyIG51bWJlciA9IGRlZmluZSgnbnVtYmVyJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcic7XG59KTtcbmZ1bmN0aW9uIGFycmF5T2YoLi4udHlwZXMpIHtcbiAgcmV0dXJuIGFzc2VydC5kZWZpbmUoJ2FycmF5IG9mICcgKyB0eXBlcy5tYXAocHJldHR5UHJpbnQpLmpvaW4oJy8nKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXNzZXJ0KHZhbHVlKS5pcyhBcnJheSkpIHtcbiAgICAgIGZvciAodmFyIGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgYXNzZXJ0KGl0ZW0pLmlzKC4uLnR5cGVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gc3RydWN0dXJlKGRlZmluaXRpb24pIHtcbiAgdmFyIHByb3BlcnRpZXMgPSBPYmplY3Qua2V5cyhkZWZpbml0aW9uKTtcbiAgcmV0dXJuIGFzc2VydC5kZWZpbmUoJ29iamVjdCB3aXRoIHByb3BlcnRpZXMgJyArIHByb3BlcnRpZXMuam9pbignLCAnKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXNzZXJ0KHZhbHVlKS5pcyhPYmplY3QpKSB7XG4gICAgICBmb3IgKHZhciBwcm9wZXJ0eSBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGFzc2VydCh2YWx1ZVtwcm9wZXJ0eV0pLmlzKGRlZmluaXRpb25bcHJvcGVydHldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxudmFyIGN1cnJlbnRTdGFjayA9IFtdO1xuZnVuY3Rpb24gZmFpbChtZXNzYWdlKSB7XG4gIGN1cnJlbnRTdGFjay5wdXNoKG1lc3NhZ2UpO1xufVxuZnVuY3Rpb24gZGVmaW5lKGNsYXNzT3JOYW1lLCBjaGVjaykge1xuICB2YXIgY2xzID0gY2xhc3NPck5hbWU7XG4gIGlmICh0eXBlb2YgY2xhc3NPck5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgY2xzID0gZnVuY3Rpb24oKSB7fTtcbiAgICBjbHMuX19hc3NlcnROYW1lID0gY2xhc3NPck5hbWU7XG4gIH1cbiAgY2xzLmFzc2VydCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNoZWNrKHZhbHVlKTtcbiAgfTtcbiAgcmV0dXJuIGNscztcbn1cbmZ1bmN0aW9uIGFzc2VydCh2YWx1ZSkge1xuICByZXR1cm4ge2lzOiBmdW5jdGlvbiBpcyguLi50eXBlcykge1xuICAgICAgdmFyIGFsbEVycm9ycyA9IFtdO1xuICAgICAgdmFyIGVycm9ycztcbiAgICAgIGZvciAodmFyIHR5cGUgb2YgdHlwZXMpIHtcbiAgICAgICAgZXJyb3JzID0gW107XG4gICAgICAgIGlmIChpc1R5cGUodmFsdWUsIHR5cGUsIGVycm9ycykpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhbGxFcnJvcnMucHVzaChwcmV0dHlQcmludCh2YWx1ZSkgKyAnIGlzIG5vdCBpbnN0YW5jZSBvZiAnICsgcHJldHR5UHJpbnQodHlwZSkpO1xuICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIGFsbEVycm9ycy5wdXNoKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGN1cnJlbnRTdGFjay5wdXNoKC4uLmFsbEVycm9ycyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfX07XG59XG5hc3NlcnQudHlwZSA9IHR5cGU7XG5hc3NlcnQuYXJndW1lbnRUeXBlcyA9IGFzc2VydEFyZ3VtZW50VHlwZXM7XG5hc3NlcnQucmV0dXJuVHlwZSA9IHJldHVyblR5cGU7XG5hc3NlcnQuZGVmaW5lID0gZGVmaW5lO1xuYXNzZXJ0LmZhaWwgPSBmYWlsO1xuYXNzZXJ0LnN0cmluZyA9IHN0cmluZztcbmFzc2VydC5udW1iZXIgPSBudW1iZXI7XG5hc3NlcnQuYm9vbGVhbiA9IGJvb2xlYW47XG5hc3NlcnQuYXJyYXlPZiA9IGFycmF5T2Y7XG5hc3NlcnQuc3RydWN0dXJlID0gc3RydWN0dXJlO1xuZXhwb3J0IHthc3NlcnR9O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9